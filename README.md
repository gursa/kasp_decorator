# kasp_decorator

Имеем базу данных с единственной таблицей типа:

```cpp
struct records
{
    std::string key;
    std::string data;
}
```

Ограничений на длину key и data нет. 
Key в БД уникальный.

Интерфейс этой базы данных должен содержать методы получения по ключу, задания значения по ключу и удаления по ключу.
Реализация БД не важна и ее делать не надо, работаем только с интерфейсом.

Необходимо реализовать кэш для БД в виде класса-декоратора для базы данных со следующими свойствами:
- Кэш должен быть безопасным с точки зрения многопоточности. БД считаем безопасной с т.з. многопоточности.
- Декоратор должен кэшировать записи и сохранять изменения в базу данных с заданной периодичностью.
- Если поток запросил запись, которая занята другим потоком, то он должен ждать записи некоторое время, по истечению которого выкинуть исключение.
- Если поток запросил запись, которой нет в кэше, то кэш должен подгрузить её из базы.
- Если поток запросил запись, которой нет в базе данных, то кэш должен создать запись в базе с запрашиваемым ключом.

Необходимо написать функциональный тест на кэш.
Для реализации БД в тесте написать Mock, принцип хранения данных на свое усмотрение.

Используемые технологии: stl, boost
